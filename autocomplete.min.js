!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";return function(e){var t,n,o=document,i=e.parent||o.body,r=e.container||o.createElement("div"),f=r.style,l=navigator.userAgent,a=-1!==l.indexOf("Firefox")&&-1!==l.indexOf("Mobile"),u=e.debounceWaitMs||0,s=e.preventSubmit||!1,d=e.disableAutoSelect||!1,c=a?"input":"keyup",p=[],v="",m=2,g=e.showOnFocus,h=0;if(void 0!==e.minLength&&(m=e.minLength),!e.input)throw new Error("input undefined");var E=e.input;function w(){n&&window.clearTimeout(n)}function L(){return!!r.parentNode}function b(){h++,p=[],v="",t=void 0,function(){var e=r.parentNode;e&&e.removeChild(r)}()}function y(){for(;r.firstChild;)r.removeChild(r.firstChild);var n=function(e,t){var n=o.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var l=function(e,t){var n=o.createElement("div");return n.textContent=e,n};e.renderGroup&&(l=e.renderGroup);var a=o.createDocumentFragment(),u="#9?$";if(p.forEach((function(o){if(o.group&&o.group!==u){u=o.group;var i=l(o.group,v);i&&(i.className+=" group",a.appendChild(i))}var r=n(o,v);r&&(r.addEventListener("click",(function(t){e.onSelect(o,E),b(),t.preventDefault(),t.stopPropagation()})),o===t&&(r.className+=" selected"),a.appendChild(r))})),r.appendChild(a),p.length<1){if(!e.emptyMsg)return void b();var s=o.createElement("div");s.className="empty",s.textContent=e.emptyMsg,r.appendChild(s)}r.parentNode||i.appendChild(r),function(){if(L()){f.height="auto",f.width=E.offsetWidth+"px";var t,n=0;i(),i(),e.customize&&t&&e.customize(E,t,r,n)}function i(){var e=o.documentElement,i=e.clientTop||o.body.clientTop||0,r=e.clientLeft||o.body.clientLeft||0,l=window.pageYOffset||e.scrollTop,a=window.pageXOffset||e.scrollLeft,u=(t=E.getBoundingClientRect()).top+E.offsetHeight+l-i,s=t.left+a-r;f.top=u+"px",f.left=s+"px",(n=window.innerHeight-(t.top+E.offsetHeight))<0&&(n=0),f.top=u+"px",f.bottom="",f.left=s+"px",f.maxHeight=n+"px"}}(),function(){var e=r.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<r.scrollTop)r.scrollTop=t.offsetTop;else{var o=t.offsetTop+t.offsetHeight,i=r.scrollTop+r.offsetHeight;o>i&&(r.scrollTop+=o-i)}}}()}function x(){L()&&y()}function C(){x()}function T(e){e.target!==r?x():e.preventDefault()}function N(e){for(var t=e.which||e.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++){if(t===o[n])return}t>=112&&t<=123||40===t&&L()||H(0)}function k(n){var o=n.which||n.keyCode||0;if(38===o||40===o||27===o){var i=L();if(27===o)b();else{if(!i||p.length<1)return;38===o?function(){if(p.length<1)t=void 0;else if(t===p[0])t=p[p.length-1];else for(var e=p.length-1;e>0;e--)if(t===p[e]||1===e){t=p[e-1];break}}():function(){if(p.length<1&&(t=void 0),t&&t!==p[p.length-1]){for(var e=0;e<p.length-1;e++)if(t===p[e]){t=p[e+1];break}}else t=p[0]}(),y()}return n.preventDefault(),void(i&&n.stopPropagation())}13===o&&(t&&(e.onSelect(t,E),b()),s&&n.preventDefault())}function D(){g&&H(1)}function H(o){var i=++h,r=E.value;r.length>=m||1===o?(w(),n=window.setTimeout((function(){e.fetch(r,(function(e){h===i&&e&&(v=r,t=(p=e).length<1||d?void 0:p[0],y())}),o)}),0===o?u:0)):b()}function O(){setTimeout((function(){o.activeElement!==E&&b()}),200)}return r.className="autocomplete "+(e.className||""),f.position="absolute",r.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),r.addEventListener("focus",(function(){return E.focus()})),E.addEventListener("keydown",k),E.addEventListener(c,N),E.addEventListener("blur",O),E.addEventListener("focus",D),window.addEventListener("resize",C),o.addEventListener("scroll",T,!0),{destroy:function(){E.removeEventListener("focus",D),E.removeEventListener("keydown",k),E.removeEventListener(c,N),E.removeEventListener("blur",O),window.removeEventListener("resize",C),o.removeEventListener("scroll",T,!0),w(),b()}}}}));
//# sourceMappingURL=autocomplete.min.js.map
